{% extends "main/base.html" %}
{% load static %}
{% block content %}
{% load humanize %}
<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
<div class="background" style="background-color: #286DA8">
  <div class="container">
    <h1 class="display-4" style="padding-top:3rem; color:white">Packages - {{ instance.clinicName }}</h1>
    <p style="color:white">You have {{package_count}} packages. Your maximum limit for live packages is {% if instance.pro_is_published == True and instance.ppq_is_published == False %} 2. {% elif instance.ppq_is_published == True and instance.pro_is_published == False %} 6. {% else %} 0. {% endif %}</p>
    <br>
    <a href="{% url 'createpackage' instance.pk %}">
      <button id="brandButtonGoalPackage" type="button" class="btn btn-outline-success btn-md shadow" style="min-width: 10rem;"> Create Package</button>
    </a>
    <br>
    <br>
  </div>
</div>

<br>
<div class="container py-5">
  {% if listing %}
  <h2> Ongoing IVF packages: </h2>
  <table class="table text-center">
    <thead>
      <tr>
        <th scope="col">Package name</th>
        <th scope="col">Expire:</th>
        <th scope="col">Is package live on web?</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    {% for listings in listing %}
    <tbody>
      <tr>
        <th scope="row">{{ listings.packagetitle }}</th>
        <td>
        {{ listings.package_end_list_date|naturaltime}}
        </td>
        <td>
          {% if listings.is_package_active == True %}
          <i class="fas fa-check-circle" style="color:green"></i>
          {% else %}
          <i class="fas fa-minus-circle" style="color:red"></i>
          {% endif %}
        </td>
        <td>
          <p>
            <a href="{% url 'updatepropackage' listings.id %}" style="text-decoration: none">
              <button type="button" class="btn btn-outline-dark btn-block">Update</button>
            </a>
          </p>

          <p>
            <a href="{{ listings.packageclinic.clinic_url}}#packages" style="text-decoration: none">
              <button type="button" class="btn btn-outline-dark btn-block">Live view</button>
            </a>
          </p>

          <p>
            <a href="{% url 'deletepropackage' listings.id %}" style="text-decoration: none">
              <button type="button" class="btn btn-outline-dark btn-block">Delete</button>
            </a>
          </p>
        </td>
    </tbody>
    {% endfor %}
  </table>
  {% endif %}
  {% if package_count == 0 %}
  <p>You did not create any packages for this clinic yet.</p>
  {% else %}
  <br>
  <br>
  <br>
  <br>
  {% endif %}
  {% if notactivelisting %}
  <h2> Expired IVF packages: </h2>
  <table class="table text-center">
    <thead>
      <tr>
        <th scope="col">Package name</th>
        <th scope="col">Expired</th>
        <th scope="col">Is package live on web?</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    {% for notactivelistings in notactivelisting %}
    <tbody>
      <tr>
        <th scope="row">{{ notactivelistings.packagetitle }}</th>
        <td>
        {{ notactivelistings.package_end_list_date|naturaltime}}
        </td>
        <td>
          <i class="fas fa-minus-circle" style="color:red"></i>
        </td>
        <td>
          <p>
            <a href="{% url 'updatepropackage' notactivelistings.id %}" style="text-decoration: none">
              <button type="button" class="btn btn-outline-dark btn-block">Update</button>
            </a>
          </p>
          <p>
            <a href="{% url 'prolongpropackage' notactivelistings.id %}" style="text-decoration: none">
              <button type="button" class="btn btn-outline-dark btn-block">Prolong</button>
            </a>
          </p>
          <p>
            <a href="{% url 'deletepropackage' notactivelistings.id %}" style="text-decoration: none">
              <button type="button" class="btn btn-outline-dark btn-block">Delete</button>
            </a>
          </p>
        </td>
    </tbody>
    {% endfor %}
  </table>
  {% endif %}
</div>




{% endblock  %}
