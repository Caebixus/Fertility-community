{% extends "main/base.html" %}
{% load static %}
{% load humanize %}
{% block content %}
<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
<div class="background" style="background-color: #286DA8">
  <div class="container">
    <h1 class="display-4" style="padding-top:3rem; color:white">Update package: {{ instance.packagetitle }} of {{ instance.packageclinic }}</h1>
    <br>
    <p style="color:white">This package will expire in: {{ instance.package_end_list_date|naturaltime}} (if you want prolong this package, delete it and create new one with new date)</p>
    <br>
  </div>
</div>
<div class="container py-4">
  {% if form.errors %}
    {% for field in form %}
        {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
        {% endfor %}
    {% endfor %}
    {% for error in form.non_field_errors %}
        <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
        </div>
    {% endfor %}
  {% endif %}
  <main role="main">
    <div class="container" style="max-width: 70rem; text-align: center">
      {% if form.errors %}
        {% for field in form %}
            {% for error in field.errors %}
                <div class="alert alert-danger">
                    <strong>{{ error|escape }}</strong>
                </div>
            {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
        {% endfor %}
      {% endif %}
      <form method='POST' enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.non_field_errors }}

        {{ form.source.errors }}
        {{ form.source }}
        <br>
        <div class="fieldWrapper" style="text-align: left">
          {{ form.packagetitle.errors }}
          <label for="{{ form.packagetitle.id_for_label}}">Package title:</label>
          {{ form.packagetitle }}
        </div>
        <br>
        <hr>
        <br>
        {% if instance.package_pic %}
          <div class="col-md" style="text-align: left">
            <p>Currently uploaded picture: </p>
            <img src="{{ instance.package_pic.url }}" alt="Uploaded picture" style="width:100px; height 100px;">
          </div>
          <br>
          <div class="col-md" style="text-align: left">
            {{ form.package_pic.errors }}
              <label for="{{ form.package_pic.id_for_label}}"><p>Re-upload (500x500 px):</p></label>
            {{ form.package_pic }}
          </div>
          {% else %}
          <div class="fieldWrapper" style="text-align: left">
            {{ form.package_pic.errors }}
            <label for="{{ form.package_pic.id_for_label}}">Package Image (500x500 px):</label>
            {{ form.package_pic }}
          </div>
        {% endif %}
        <br>
        <style> .django-ckeditor-widget { min-width:100% !important; } </style>
        <div class="fieldWrapper" style="text-align:">
          {{ form.packagedesc.errors }}
          <p>Package Description (max 800 characters):</p>
          {{ form.packagedesc }}
        </div>
        <br>
        <hr>
        <br>
        <div class="fieldWrapper" style="text-align: left">
          {{ form.packagecategory.errors }}
          <label for="{{ form.packagecategory.id_for_label}}">Package category:</label>
          <div class="fieldWrapper">
            {{ form.packagecategory }}
          </div>
        </div>
        <br>
        <div class="fieldWrapper" style="text-align: left">
          {{ form.packagecost.errors }}
          <label for="{{ form.packagecost.id_for_label}}">Package cost in your clinic currency:</label>
          <div class="fieldWrapper">
            {{ form.packagecost }}
          </div>
        </div>
        <br>
        <div class="fieldWrapper" style="text-align: left">
          {{ emailform.query_email.errors }}
          <label for="{{ emailform.query_email.id_for_label}}">Inquiry email (this email will receive inquiries):</label>
          <div class="fieldWrapper">
            {{ emailform.query_email }}
          </div>
        </div>
        <br>
        <div class="fieldWrapper" style="text-align: left">
          {{ form.package_url.errors }}
          <label for="{{ form.package_url.id_for_label}}">Package URL on your website (add <a href="https://ga-dev-tools.appspot.com/campaign-url-builder/">UTM codes</a> as well for your analytics):</label>
          <div class="fieldWrapper">
            {{ form.package_url }}
          </div>
        </div>
        <br>
        <div class="fieldWrapper" style="text-align: left">
          {{ form.package_phone.errors }}
          <label for="{{ form.package_phone.id_for_label}}">Package phone number for clients:</label>
          <div class="fieldWrapper">
            {{ form.package_phone }}
          </div>
        </div>
        <br>
        <hr>
        <br>
        <input class="btn btn-outline-dark " type='submit' value='Update package' />
      </form>
    </div>
  </main>
</div>
<br>
{% endblock  %}
